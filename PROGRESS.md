# 專案進度管理

本文件統一管理維也納到米蘭旅程的美食研究進度與完成標準。

## 📊 當前進度總覽

### 🍽️ 美食研究進度

| 城市 | 狀態 | 重點推薦 | 備註 |
|------|------|----------|------|
| 維也納 | ✅ 已完成 | 8 個重點推薦 | 已完成評分與分類，包含米其林餐廳、傳統小酒館、咖啡館。符合所有完成標準。 |
| 羅馬 | ✅ 已完成 | 17 個推薦地點 | 詳細研究與評分完成，包含傳統羅馬菜、創意料理、gelato、pizza al taglio。符合所有完成標準。 |
| 佛羅倫斯 | ✅ 已完成 | 22 個推薦地點 | 已完成評分，包含米其林餐廳與傳統 trattoria。完成「未深入研究候選」研究，新增 7 個候選評分（6 個 shortlisted，1 個 rejected）。符合所有完成標準。 |
| 威尼斯 | ✅ 已完成 | 14 個推薦地點 | 已完成詳細評分，包含海鮮餐廳、bacaro/cicchetti、gelato、咖啡館、糕點店。已處理所有 inbox 項目（新增5個重點推薦、3個備選、1個排除）。符合所有完成標準。 |
| 米蘭 | ✅ 已完成 | 23 個推薦地點 | 大幅擴充研究完成：4個米其林餐廳（含三星）、4個傳統餐廳、3個Aperitivo、9個咖啡館/甜點店、3個其他。所有候選完成詳細研究與評分，無inbox殘留。符合所有完成標準。 |

### 📋 後續執行事項

#### 待完成
- [ ] 確認需預訂的餐廳並完成預訂
- [ ] 規劃每日用餐時間與路線

### 🔬 技術研究成果

#### Google Maps 評價查詢研究 (2026-01-13)
- ✅ 完成 Google Maps API 最低分評價查詢能力研究
- 研究文件：[docs/google-maps-lowest-rating-research.md](docs/google-maps-lowest-rating-research.md)
- **關鍵發現**：
  - Google 官方 API 功能受限（最多5則評價，無篩選參數）
  - 第三方 API（SerpApi, Outscraper）可查詢完整評價並篩選
  - 法律風險：直接抓取違反 Google ToS，需謹慎使用
- **建議**：當前專案規模適合手動查看評價，無需使用 API

---

## 📁 文件結構方法

### 每個城市的標準文件結構

自 2026-01-11 起，所有城市研究採用以下標準化文件結構：

```
gourmet/YYYY-MM-DD-<city>/
├── overview.md       # 快速導覽：旅行資訊、策略、進度
├── candidates.md     # 簡要總覽表：所有候選地點的快速掃描
├── notes.md          # 詳細證據：完整研究筆記、來源、評分理由
├── top-places.md     # 最終推薦：Top Picks、Backups、用餐策略
├── inbox.md          # 工作空間：未結構化的探索筆記
└── excluded.md       # 排除記錄：被考慮但排除的地點及原因
```

### 漸進式揭露原則

文件結構遵循漸進式揭露原則，依照資訊深度分層：

1. **overview.md** (5分鐘) → 快速了解背景與策略
2. **top-places.md** (10分鐘) → 直接查看最終推薦
3. **candidates.md** (5-10分鐘) → 快速掃描所有候選及評分
4. **notes.md** (30+分鐘) → 深入研究每個地點的完整證據
5. **inbox.md** (探索中) → 工作進行中的筆記
6. **excluded.md** (5分鐘) → 查看被排除的地點及原因

### candidates.md vs notes.md 的分離

**問題背景**：
- 原本 `candidates.md` 同時包含總覽表和詳細研究筆記
- 文件過長（300-1000+ 行），快速掃描困難
- 違反漸進式揭露原則（強迫讀者閱讀所有細節）

**解決方案**：
- **candidates.md**：僅保留候選總覽表（表格格式）
  - 欄位：name, category, area, type, google_maps_url, status, sources, notes
  - notes 欄位：一行中文摘要
  - 檔案末尾連結到 notes.md
  
- **notes.md**：所有詳細研究筆記
  - 每個地點的完整證據段落
  - 來源引用（URLs）
  - 評分理由（50分制細分）
  - 實用資訊（訂位、排隊、休息日等）

**好處**：
- ✅ 快速掃描：在 candidates.md 中一眼看到所有候選與評分
- ✅ 深入調查：需要時在 notes.md 中查看完整證據
- ✅ 清晰的資訊層次：從摘要到細節的平滑過渡
- ✅ 避免資訊過載：不強迫讀者消化所有細節
- ✅ 保持可追溯性：所有證據仍然完整保存

**遷移狀態**：
- ✅ 維也納：已完成分離
- ✅ 羅馬：已完成分離
- ✅ 佛羅倫斯：已完成分離
- ✅ 威尼斯：已完成分離
- ✅ 米蘭：已完成分離
- ✅ AGENTS.md：已更新工作流程與範例

---

## ✅ 研究完成標準

城市研究標記為「✅ 已完成」(Completed) **必須同時滿足以下所有條件**：

### 1. 所有候選地點已完成分類

- `candidates.md` 中不得有 `status: inbox` 的項目
- 每個候選地點必須：
  - 已完成詳細研究並評分（詳細證據在 `notes.md`）
  - **或**明確移至 `excluded.md` 並註明原因
  - **或**在 `excluded.md` 中標註「未進一步研究」並說明理由

### 2. excluded.md 中無待決定項目

- `excluded.md` 不得包含「待決定的候選」、「尚未研究」等段落
- 所有列在 `excluded.md` 的地點必須有明確狀態：
  - 「REJECTED」- 附帶評分與詳細排除理由
  - 「Not Researched Further」- 說明為何優先級較低

### 3. 最終推薦清單已完成

- `top-places.md` 包含完整清單：
  - Top Picks（35 分以上）
  - Backups（30-34 分）
- 用餐策略（Dining Strategy）段落已完成
- 待辦事項（To-Do）段落已建立

### 4. 總覽檢查清單全部完成

- `overview.md` 中的進度檢查清單所有項目標記為 `[x]`
- 若仍有 `[ ]` 項目，該城市**尚未完成**

### 5. inbox.md 已清理

- `inbox.md` 不得包含未處理的候選地點
- 所有候選必須：
  - 已轉移到 `candidates.md` (任何 status)
  - **或**已明確移至 `excluded.md` 並註明原因
- `inbox.md` 應該：
  - 選項A：清空並在頂部註明「已轉移至 candidates.md (YYYY-MM-DD)」
  - 選項B：保留作為歷史記錄，在頂部註明「歷史記錄（已轉移至 candidates.md, YYYY-MM-DD）」

### 完成標準說明

**不需要**：
- ❌ 研究初期收集的**所有**地點
  - 可在 `excluded.md` 中將候選標記為「未進一步研究」
  - 重質不重量（4-6 個重點推薦即足夠）
  - **注意**：研究進行中（📝 或 🔄 狀態）時，候選可暫時保持 `status: inbox`。但標記為 ✅ 完成前，所有 inbox 項目必須處理完畢——研究評分或移至 `excluded.md` 並說明理由。

- ❌ 每個類別都有備選方案
  - 重點推薦是必要的；備選方案是加分項

- ❌ 完成實際訂位
  - 研究完成意味著有最終推薦清單
  - 訂位是執行階段（在 PROGRESS.md 的「後續執行事項」追蹤）

---

## 🔄 狀態轉換定義

使用以下狀態指示符來反映實際進度：

| 狀態 | 說明 | 條件 |
|------|------|------|
| ⏳ **未開始** | Not Started | 尚未建立 `overview.md` |
| 📝 **研究中** | In Progress | 正在積極研究候選地點 |
| 🔄 **待完成** | Needs Finalization | 核心研究已完成，但尚未滿足完成標準 |
| ✅ **已完成** | Completed | 滿足上述所有**五項**完成標準 |

---

## 🔍 驗證檢查清單

標記城市為「✅ 已完成」前，必須執行以下驗證：

```bash
# 檢查 candidates.md 是否還有 inbox 項目
# 主要模式："| inbox |"（標準 markdown 表格格式，帶空格）
# 備用模式："status: inbox" 或 "status:inbox"（增加穩健性）
grep -E "\| inbox \||status:?\s*inbox" candidates.md | wc -l
# → 應該回傳 0

# 檢查 excluded.md 是否有待決定段落（僅標題）
# 目標：段落標題（以 # 開頭的行）包含待決定指示符
# 範例應匹配：
#   "### 待決定的候選"
#   "## Undecided Candidates"
#   "### Not Yet Researched"
grep -E "^#.*待決定|^#.*待定|^#.*尚未研究|^#.*[Uu]ndecided|^#.*[Nn]ot [Yy]et [Rr]esearched|^#.*[Pp]ending" excluded.md | wc -l
# → 應該回傳 0

# 檢查 overview.md 未完成的清單項目
grep "\[ \]" overview.md | wc -l
# → 應該回傳 0

# 驗證 top-places.md 存在且有內容
ls -la top-places.md && wc -l top-places.md
# → 檔案應存在且有實質內容（通常 >50 行）

# 檢查 inbox.md 是否已清理
# 手動檢查 inbox.md 頂部是否有「已轉移」或「歷史記錄」標記
head -5 inbox.md
# → 應該看到「已轉移至 candidates.md」或「歷史記錄（已轉移）」
# → 或者檔案內容為空/僅含標記說明
```

**驗證注意事項**：
- `candidates.md` 使用 markdown 表格格式：`| inbox |`（狀態周圍有空格）
- 備用模式 `status: inbox` 處理表格格式略有變化的情況
- `excluded.md` 模式專門針對段落標題（`^#`）以避免正文中的誤判
- `inbox.md` 清理需手動驗證（確認頂部有標記說明，或內容已清空）

---

## 📝 更新進度指南

### 完成城市研究後必須執行

1. **驗證研究完成標準**（參見上方「研究完成標準」）：
   - ✅ 所有候選已分類（無 `status: inbox` 殘留）
   - ✅ `excluded.md` 無待決定項目
   - ✅ `top-places.md` 已定案，包含 Top Picks 與用餐策略
   - ✅ `overview.md` 檢查清單全部標記 `[x]`
   - ✅ `inbox.md` 已清理（頂部有標記或內容已清空）
   - 執行完成標準檢查清單中的驗證指令

2. **更新 PROGRESS.md 進度**（本文件）：
   - 更新「🍽️ 美食研究進度」表格的當前狀態
   - 根據完成標準使用正確的狀態圖示：
     - ⏳ 未開始 → 📝 研究中 → 🔄 待完成 → ✅ 已完成
   - **只有**滿足所有完成標準時才使用 ✅
   - 更新重點推薦數量
   - 添加相關備註說明研究完成情況

3. **更新 README.md**：
   - 同步更新 README.md 中的進度表格
   - 保持與 PROGRESS.md 一致

4. **更新 AGENTS.md（如工作流程改進）**：
   - 若發現更有效的研究方法，記錄於「Process Improvements (Lessons Learned)」
   - 若發現常見模式或陷阱，添加至相關段落
   - 保持工作流程文件與實際作法一致

**為何重要**：
- PROGRESS.md 是進度儀表板 - 必須反映當前實際狀況
- 完成標準確保所有城市的一致性
- AGENTS.md 記錄機構知識 - 改進有利於未來研究
- 一致的更新避免混淆與重複工作

---

## 🎯 研究優先級

### 高優先級（必須完成）
- 每個城市 4-6 個重點推薦
- 至少涵蓋：正式餐廳、休閒選擇、甜點/gelato
- 地理分布合理（配合每日行程）

### 中優先級（視時間完成）
- 2-3 個備選方案
- 特色咖啡館
- 額外甜點店

### 低優先級（可選）
- 超過 6 個以上的推薦
- 過於偏遠的地點
- 高風險或評價兩極的地點

---

## 📚 相關文件

- [AGENTS.md](AGENTS.md) - AI 代理人工作流程指南
- [README.md](README.md) - 專案總覽
- 各城市研究資料：
  - [維也納](gourmet/2026-02-11-vienna/)
  - [羅馬](gourmet/2026-02-13-rome/)
  - [佛羅倫斯](gourmet/2026-02-19-florence/)
  - [威尼斯](gourmet/2026-02-22-venice/)
  - [米蘭](gourmet/2026-02-25-milan/)
